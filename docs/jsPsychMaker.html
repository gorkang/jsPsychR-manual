<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 4 jsPsychMaker | jsPsychR manual</title>
  <meta name="description" content="Chapter 4 jsPsychMaker | jsPsychR manual" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 4 jsPsychMaker | jsPsychR manual" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 4 jsPsychMaker | jsPsychR manual" />
  
  
  

<meta name="author" content="Gorka Navarrete" />


<meta name="date" content="2021-11-06" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="QuickGuide.html"/>
<link rel="next" href="jsPsychMonkeys.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> What is jsPsychR?</a></li>
<li class="chapter" data-level="2" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>2</b> Reproducible experiments</a>
<ul>
<li class="chapter" data-level="2.1" data-path="intro.html"><a href="intro.html#open-and-reproducible-experimental-pipeline"><i class="fa fa-check"></i><b>2.1</b> Open and reproducible experimental pipeline</a></li>
<li class="chapter" data-level="2.2" data-path="intro.html"><a href="intro.html#automatization"><i class="fa fa-check"></i><b>2.2</b> Automatization</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="QuickGuide.html"><a href="QuickGuide.html"><i class="fa fa-check"></i><b>3</b> Quick Guide</a>
<ul>
<li class="chapter" data-level="3.1" data-path="QuickGuide.html"><a href="QuickGuide.html#QuickGuidejsPsychMaker"><i class="fa fa-check"></i><b>3.1</b> jsPsychMaker: Create an experimental protocol</a>
<ul>
<li class="chapter" data-level="" data-path="QuickGuide.html"><a href="QuickGuide.html#download-jspsychmaker"><i class="fa fa-check"></i>1) Download jsPsychMaker</a></li>
<li class="chapter" data-level="" data-path="QuickGuide.html"><a href="QuickGuide.html#edit-configuration"><i class="fa fa-check"></i>2) Edit configuration</a></li>
<li class="chapter" data-level="" data-path="QuickGuide.html"><a href="QuickGuide.html#run-experiment"><i class="fa fa-check"></i>3) Run experiment</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="QuickGuide.html"><a href="QuickGuide.html#QuickGuidejsPsychMonkeys"><i class="fa fa-check"></i><b>3.2</b> jsPsychMonkeys: Simulate participants</a>
<ul>
<li class="chapter" data-level="" data-path="QuickGuide.html"><a href="QuickGuide.html#download-jspsychmonkeys"><i class="fa fa-check"></i>1) Download jsPsychMonkeys</a></li>
<li class="chapter" data-level="" data-path="QuickGuide.html"><a href="QuickGuide.html#setup"><i class="fa fa-check"></i>2) Setup</a></li>
<li class="chapter" data-level="" data-path="QuickGuide.html"><a href="QuickGuide.html#run-monkeys"><i class="fa fa-check"></i>3) Run Monkeys</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="QuickGuide.html"><a href="QuickGuide.html#QuickGuidejsPsychHelpeR"><i class="fa fa-check"></i><b>3.3</b> jsPsychHelpeR: Prepare data</a>
<ul>
<li class="chapter" data-level="" data-path="QuickGuide.html"><a href="QuickGuide.html#download-jspsychhelper"><i class="fa fa-check"></i>1) Download jsPsychHelpeR</a></li>
<li class="chapter" data-level="" data-path="QuickGuide.html"><a href="QuickGuide.html#run-setup"><i class="fa fa-check"></i>2) Run setup</a></li>
<li class="chapter" data-level="" data-path="QuickGuide.html"><a href="QuickGuide.html#run-data-preparation"><i class="fa fa-check"></i>3) Run data preparation</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="jsPsychMaker.html"><a href="jsPsychMaker.html"><i class="fa fa-check"></i><b>4</b> jsPsychMaker</a>
<ul>
<li class="chapter" data-level="4.1" data-path="jsPsychMaker.html"><a href="jsPsychMaker.html#experiment-configuration"><i class="fa fa-check"></i><b>4.1</b> Experiment configuration</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="jsPsychMaker.html"><a href="jsPsychMaker.html#main-parameters"><i class="fa fa-check"></i><b>4.1.1</b> Main parameters</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="jsPsychMaker.html"><a href="jsPsychMaker.html#order-of-tasks"><i class="fa fa-check"></i><b>4.2</b> Order of tasks</a></li>
<li class="chapter" data-level="4.3" data-path="jsPsychMaker.html"><a href="jsPsychMaker.html#online-offline-protocols"><i class="fa fa-check"></i><b>4.3</b> online-offline protocols</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="jsPsychMaker.html"><a href="jsPsychMaker.html#offline"><i class="fa fa-check"></i><b>4.3.1</b> Offline</a></li>
<li class="chapter" data-level="4.3.2" data-path="jsPsychMaker.html"><a href="jsPsychMaker.html#online"><i class="fa fa-check"></i><b>4.3.2</b> Online</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="jsPsychMaker.html"><a href="jsPsychMaker.html#between-subject-tasks"><i class="fa fa-check"></i><b>4.4</b> Between-subject tasks</a></li>
<li class="chapter" data-level="4.5" data-path="jsPsychMaker.html"><a href="jsPsychMaker.html#developing-tasks"><i class="fa fa-check"></i><b>4.5</b> Developing tasks</a></li>
<li class="chapter" data-level="4.6" data-path="jsPsychMaker.html"><a href="jsPsychMaker.html#technical-aspects"><i class="fa fa-check"></i><b>4.6</b> Technical aspects</a>
<ul>
<li class="chapter" data-level="4.6.1" data-path="jsPsychMaker.html"><a href="jsPsychMaker.html#jspsychmaker-main-changes-on-a-task"><i class="fa fa-check"></i><b>4.6.1</b> jsPsychMaker main changes on a task</a></li>
<li class="chapter" data-level="4.6.2" data-path="jsPsychMaker.html"><a href="jsPsychMaker.html#conditional-questions"><i class="fa fa-check"></i><b>4.6.2</b> Conditional questions</a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="jsPsychMaker.html"><a href="jsPsychMaker.html#common-errors"><i class="fa fa-check"></i><b>4.7</b> Common ERRORS</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="jsPsychMonkeys.html"><a href="jsPsychMonkeys.html"><i class="fa fa-check"></i><b>5</b> jsPsychMonkeys</a>
<ul>
<li class="chapter" data-level="5.1" data-path="jsPsychMonkeys.html"><a href="jsPsychMonkeys.html#how-to-simulate-participants"><i class="fa fa-check"></i><b>5.1</b> How to simulate participants</a></li>
<li class="chapter" data-level="5.2" data-path="jsPsychMonkeys.html"><a href="jsPsychMonkeys.html#parameters"><i class="fa fa-check"></i><b>5.2</b> Parameters</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="jsPsychMonkeys.html"><a href="jsPsychMonkeys.html#release-the-monkeys"><i class="fa fa-check"></i><b>5.2.1</b> Release the Monkeys!</a></li>
<li class="chapter" data-level="5.2.2" data-path="jsPsychMonkeys.html"><a href="jsPsychMonkeys.html#launch-monkeys-on-a-server"><i class="fa fa-check"></i><b>5.2.2</b> Launch monkeys on a server</a></li>
<li class="chapter" data-level="5.2.3" data-path="jsPsychMonkeys.html"><a href="jsPsychMonkeys.html#parameters-for-parameters_monkeys_minimal"><i class="fa fa-check"></i><b>5.2.3</b> Parameters for parameters_monkeys_minimal</a>
<ul>
<li class="chapter" data-level="5.2.3.1" data-path="jsPsychMonkeys.html"><a href="jsPsychMonkeys.html#parameters-details"><i class="fa fa-check"></i><b>5.2.3.1</b> Parameters details</a></li>
</ul></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="jsPsychHelpeR.html"><a href="jsPsychHelpeR.html"><i class="fa fa-check"></i><b>6</b> jsPsychHelpeR</a>
<ul>
<li class="chapter" data-level="6.1" data-path="jsPsychHelpeR.html"><a href="jsPsychHelpeR.html#how-to-prepare-data"><i class="fa fa-check"></i><b>6.1</b> How to prepare data</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="jsPsychHelpeR.html"><a href="jsPsychHelpeR.html#output-tables-and-plots"><i class="fa fa-check"></i><b>6.1.1</b> Output tables and plots</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="jsPsychHelpeR.html"><a href="jsPsychHelpeR.html#create-your-own-reports"><i class="fa fa-check"></i><b>6.2</b> Create your own reports</a></li>
<li class="chapter" data-level="6.3" data-path="jsPsychHelpeR.html"><a href="jsPsychHelpeR.html#create-new-tasks"><i class="fa fa-check"></i><b>6.3</b> Create new tasks</a></li>
<li class="chapter" data-level="6.4" data-path="jsPsychHelpeR.html"><a href="jsPsychHelpeR.html#debug-tasks"><i class="fa fa-check"></i><b>6.4</b> DEBUG tasks</a></li>
<li class="chapter" data-level="6.5" data-path="jsPsychHelpeR.html"><a href="jsPsychHelpeR.html#technical-aspects-1"><i class="fa fa-check"></i><b>6.5</b> Technical aspects</a>
<ul>
<li class="chapter" data-level="6.5.1" data-path="jsPsychHelpeR.html"><a href="jsPsychHelpeR.html#how-trialids-are-processed"><i class="fa fa-check"></i><b>6.5.1</b> How trialid’s are processed</a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="jsPsychHelpeR.html"><a href="jsPsychHelpeR.html#common-errors-1"><i class="fa fa-check"></i><b>6.6</b> Common ERRORS</a>
<ul>
<li class="chapter" data-level="6.6.1" data-path="jsPsychHelpeR.html"><a href="jsPsychHelpeR.html#run_initial_setup"><i class="fa fa-check"></i><b>6.6.1</b> <code>run_initial_setup()</code>:</a>
<ul>
<li class="chapter" data-level="6.6.1.1" data-path="jsPsychHelpeR.html"><a href="jsPsychHelpeR.html#on-linux-ubuntu"><i class="fa fa-check"></i><b>6.6.1.1</b> On Linux (Ubuntu):</a></li>
</ul></li>
<li class="chapter" data-level="6.6.2" data-path="jsPsychHelpeR.html"><a href="jsPsychHelpeR.html#on-mac-or-windows"><i class="fa fa-check"></i><b>6.6.2</b> On Mac or Windows:</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">jsPsychR manual</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="jsPsychMaker" class="section level1" number="4">
<h1><span class="header-section-number">Chapter 4</span> jsPsychMaker</h1>
<hr />
<p><a href="https://github.com/gorkang/jsPsychMaker"><img src="img/GitHub32.png" /> jsPsychMaker</a>: Create experiments with jsPsych, randomize participants, etc.</p>
<hr />
<p>Using jsPsychMaker to build experimental protocols helps you with a few things:</p>
<ul>
<li><p>Create full protocols using tasks already implemented by just editing a config.js file</p></li>
<li><p>Select order of tasks, randomize subsets of tasks, etc.</p></li>
<li><p>Randomize participants to groups making sure the balance between the groups is maintained</p></li>
<li><p>Allow participants to continue in the task where they left in the protocol</p></li>
<li><p>Set time limits to complete the protocol</p>
<ul>
<li>Automatically discard participants over the time limit, freeing the slots for new participants</li>
</ul></li>
<li><p>Seamlessly select between online and offline protocols</p></li>
<li><p>Simulate participants with <a href="jsPsychMonkeys.html#jsPsychMonkeys">jsPsychMonkeys</a></p></li>
<li><p><em>Automagically</em> get your data prepared with <a href="jsPsychHelpeR.html#jsPsychHelpeR">jsPsychHelpeR</a></p></li>
</ul>
<hr />
<p><strong>See <a href="QuickGuide.html#QuickGuidejsPsychMaker">QuickGuide</a> for basic instructions.</strong></p>
<hr />
<div id="experiment-configuration" class="section level2" number="4.1">
<h2><span class="header-section-number">4.1</span> Experiment configuration</h2>
<p>In the <code>config.js</code> file you can find the main parameters to control how your experiment works.</p>
<div id="main-parameters" class="section level3" number="4.1.1">
<h3><span class="header-section-number">4.1.1</span> Main parameters</h3>
<ul>
<li><p><code>pid = 999999;</code>: Number of protocol</p></li>
<li><p><code>online = true;</code>: true if the protocol run in a server, false if runs locally</p></li>
<li><p><code>max_participants = 3;</code>: If you have <code>between participants</code> conditions (participants are assign to only one of a number of conditions), this is the max number of participants per condition</p></li>
<li><p><code>random_id = false;</code>: true if you want to assign a random id to participants, false if the participant needs to input an id</p></li>
<li><p><code>max_time = "24:00:00";</code>: Max time to complete the protocol (HH:MM:SS; Hours:Minutes:Seconds)</p></li>
<li><p><code>accept_discarded = true;</code>: If an user is discarded (over max_time), shall be allowed to continue given there are available slots?</p></li>
<li><p><code>debug_mode = false;</code>: When testing the protocol it shows DEBUG messages, creates the DB tables if they don’t exist… It also forces the tasks with random order of items to avoid the randomization so the <code>jsPsychMonkeys</code> can have a reproducible behavior.</p></li>
</ul>
</div>
</div>
<div id="order-of-tasks" class="section level2" number="4.2">
<h2><span class="header-section-number">4.2</span> Order of tasks</h2>
<ul>
<li><code>first_tasks = ['Consent'];</code>: The protocol will start with these tasks in the specified order</li>
<li><code>last_tasks = ['Goodbye'];</code>: These tasks will be presented in the specified order after <code>randomly_ordered_tasks</code></li>
</ul>
<p>Create as many blocks as needed:</p>
<ul>
<li><code>randomly_ordered_tasks_1 = ['TASK1', 'TASK2'];</code>: Block of tasks in random order</li>
<li><code>randomly_ordered_tasks_2 = ['TASK3'];</code>: Block of tasks in random order</li>
<li><code>secuentially_ordered_tasks_1 = ['TASK5', 'TASK4'];</code> // Block of tasks in sequential order</li>
</ul>
<p>The final array of tasks can be build combining the above blocks. The order of the tasks in the arrays starting with “random” will be randomized.</p>
<ul>
<li><code>tasks = ['first_tasks', 'randomly_ordered_tasks_1', 'secuentially_ordered_tasks_1', 'randomly_ordered_tasks_2', 'last_tasks']</code></li>
</ul>
</div>
<div id="online-offline-protocols" class="section level2" number="4.3">
<h2><span class="header-section-number">4.3</span> online-offline protocols</h2>
<p>jsPsych uses standard web technologies (HTML, CSS y Javascript), so that protocols should run in any modern browser (updated, please). We recommend Google Chrome just because our test suite runs with Google Chrome, so we will catch its specific issues earlier.</p>
<div id="offline" class="section level3" number="4.3.1">
<h3><span class="header-section-number">4.3.1</span> Offline</h3>
<p>If you want to run a protocol locally (on your computer, on a lab computer), you need to:</p>
<ul>
<li><p>set <code>online = false;</code> in the <code>config.js</code> file</p></li>
<li><p>double click index.html</p></li>
</ul>
<p><code>jsPsychR</code> will use <code>IndexedDB</code> to store the participants’ progress and balance between conditions. The output csv files will be Downloaded to the Download folder of the computer where the protocol runs.</p>
<p>If any of the tasks imports an html file, the Offline protocol will give a CORS error.</p>
</div>
<div id="online" class="section level3" number="4.3.2">
<h3><span class="header-section-number">4.3.2</span> Online</h3>
<p>Tu run a protocol online, set <code>online = true;</code>. You will need a couple more things:</p>
<ul>
<li>Install MySQL</li>
<li>A file <code>.secrets_mysql.php</code> with the contend below</li>
<li>Define a route to <code>.secrets_mysql.php</code> in <code>controllers/php/mysql.php</code>
<ul>
<li><code>require_once '../../.secrets_mysql.php';</code></li>
<li>THIS FILE <strong>SHOULD NOT</strong> BE PUBLICLY VISIBLE FROM THE BROWSER</li>
</ul></li>
<li>Upload the files to a server :)</li>
</ul>
<pre><code>&lt;?php

/* DO NOT UPLOAD TO PUBLIC REPO */

  $servername = &quot;127.0.0.1&quot;;
  $username = &quot;USERNAME OF THE DATABASE&quot;;
  $password = &quot;PASSWORD OF THE DATABASE&quot;;
  $dbname = &quot;NAME OF THE DB&quot;;
  
?&gt;</code></pre>
<p><code>jsPsychR</code> will use <code>MySQL</code> to store the participants’ progress and balance between conditions. The output csv files will be Downloaded in the <code>.data/</code> folder inside the protocol folder in the server.</p>
</div>
</div>
<div id="between-subject-tasks" class="section level2" number="4.4">
<h2><span class="header-section-number">4.4</span> Between-subject tasks</h2>
<p>The variable <code>all_conditions</code> in <code>config.js</code> let’s you define the Independent Variables (IV) and levels for the between-subject tasks:</p>
<ul>
<li><p>If there is no between-subject task:<br />
<code>all_conditions = {"protocol": {"type": ["survey"]}};</code></p></li>
<li><p>If there are between-subject tasks:
<code>all_conditions = {"NAMETASK": {"name_IV": ["name_level1", "name_level2"]}};</code></p></li>
</ul>
<p><code>jsPsychR</code> will randomize participants to the different conditions keeping the unbalance between conditions to the minimum possible.</p>
</div>
<div id="developing-tasks" class="section level2" number="4.5">
<h2><span class="header-section-number">4.5</span> Developing tasks</h2>
<p>Remember to place an <code>if (debug_mode == 'false')</code> before the randomization of the item order so when running in debug_mode, the items are not randomized. This is important so the behaviour of the jsPsychMonkeys is reproducible:</p>
<p><code>if (debug_mode == 'false') NAMETASK = jsPsych.randomization.repeat(NAMETASK,1);</code></p>
</div>
<div id="technical-aspects" class="section level2" number="4.6">
<h2><span class="header-section-number">4.6</span> Technical aspects</h2>
<p>When index.html is launched:</p>
<ul>
<li>Check if there are available slots</li>
</ul>
<p>When an uid is assigned:</p>
<ul>
<li><p><code>questions</code> array is created</p></li>
<li><p><code>between-participants</code> conditions are assigned and stored in the DB (mysql if online, IndexedDB if offline)</p></li>
</ul>
<p>Each question, timeline or conditional question needs to have a:</p>
<p><code>data: {trialid: 'NameTask_001', procedure: 'NameTask'}</code></p>
<p>The <code>trialid</code> identifies the trial, and the <code>procedure</code> makes possible to find that trial so participants can continue the tasks where they left, know when participants finished the tasks, etc. This is done in Mysql if online, IndexedDB if offline.</p>
<div id="jspsychmaker-main-changes-on-a-task" class="section level3" number="4.6.1">
<h3><span class="header-section-number">4.6.1</span> jsPsychMaker main changes on a task</h3>
<ol style="list-style-type: decimal">
<li>Start of a task</li>
</ol>
<pre><code>questions = ( typeof questions != &#39;undefined&#39; &amp;&amp; questions instanceof Array ) ? questions : [];
questions.push( check_fullscreen(&#39;NameOfTask&#39;) );
NameOfTask = [];</code></pre>
<ol start="2" style="list-style-type: decimal">
<li>Each item</li>
</ol>
<p><code>data: {trialid: 'NameOfTask_01', procedure: 'NameOfTask'}</code></p>
<ol start="3" style="list-style-type: decimal">
<li>End of experiment</li>
</ol>
<pre><code>if (debug_mode == &#39;false&#39;) NameOfTask = jsPsych.randomization.repeat(NameOfTask, 1);
NameOfTask.unshift(instruction_screen_experiment);
questions.push.apply(questions, NameOfTask)

questions.push({
    type: &#39;call-function&#39;,
    data: {trialid: &#39;NameOfTask_000&#39;, procedure: &#39;NameOfTask&#39;},
    func: function(){
      if (online) {
        var data = jsPsych.data.get().filter({procedure: &#39;NameOfTask&#39;}).csv();
      } else {
        var data = jsPsych.data.get().filter({procedure: &#39;NameOfTask&#39;}).json();
      }
      saveData(data, online, &#39;NameOfTask&#39;);
    }
});</code></pre>
</div>
<div id="conditional-questions" class="section level3" number="4.6.2">
<h3><span class="header-section-number">4.6.2</span> Conditional questions</h3>
<pre><code>var question001 = {
  type: &#39;survey-multi-choice-vertical&#39;,
  questions: [{prompt: &#39;&lt;div class=&quot;justified&quot;&gt;¿Usted se ha vacunado contra el coronavirus / covid-19?&lt;/div&gt;&#39;, options: [&#39;&amp;nbsp;Si&#39;, &#39;&amp;nbsp;No&#39;], required: true,  random_options: false, horizontal: false}],
  data: {trialid: &#39;PVC_001&#39;, procedure: &#39;PVC&#39;}
};
PVC.push(question001);

var question001_1 = {
  type: &#39;survey-multi-choice-vertical&#39;,
  questions: [{prompt: &#39;&lt;div class=&quot;justified&quot;&gt;¿Usted se va a vacunar contra el coronavirus covid-19?&lt;/div&gt;&#39;, options: [&#39;&amp;nbsp;Si&#39;, &#39;&amp;nbsp;No&#39;, &#39;&amp;nbsp;No estoy seguro&#39;], required: true,  random_options: false, horizontal: false}],
  data: {trialid: &#39;PVC_001_1&#39;, procedure: &#39;PVC&#39;}
};

var if_question001_1 = {
  timeline: [question001_1],
  data: {trialid: &#39;PVC_001_1_if&#39;, procedure: &#39;PVC&#39;},
  conditional_function: function(){
    let data = (JSON.parse((jsPsych.data.get().values().find(x =&gt; x.trialid === &#39;PVC_001&#39;))[&#39;response&#39;])[&#39;Q0&#39;]).trim();
    if((data) ==  &#39;No&#39;){
      return true;
    } else {
      return false;
    }
  }
};
PVC.push(if_question001_1);</code></pre>
</div>
</div>
<div id="common-errors" class="section level2" number="4.7">
<h2><span class="header-section-number">4.7</span> Common ERRORS</h2>
<p>If you get the following error in the console: <code>Uncaught TypeError: Cannot read properties of undefined (reading 'procedure')</code></p>
<p>Run this in the console:</p>
<pre><code>for (var i = 0; i &lt; questions.length; i++) {
  console.log(i + questions[i].data[&quot;procedure&quot;])
}</code></pre>
<p>It will stop in one of the items. Go to the console, check the array <code>questions</code> and go to the number that failed.</p>
<p>When you know the task and item that fails, you probably need to add:</p>
<ul>
<li><code>data: {trialid: 'TASKNAME_ITEMNUMBER', procedure: 'TASKNAME'}</code></li>
</ul>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="QuickGuide.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="jsPsychMonkeys.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
